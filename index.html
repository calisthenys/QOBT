<!doctype html>
<html lang="pt-BR" class="h-full">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QOBT - Quadro de Obreiros</title>

<script src="https://cdn.tailwindcss.com"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
body{font-family:'Inter',sans-serif;}
.fade-in{animation:fadeIn .3s ease-out}@keyframes fadeIn{from{opacity:.2;transform:translateY(8px)}to{opacity:1}}
.scrollbar-hide::-webkit-scrollbar{display:none}
.scrollbar-hide{-ms-overflow-style:none;scrollbar-width:none}
</style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-white to-blue-50 h-full">
<div id="app" class="h-full w-full flex flex-col overflow-hidden">

<header id="main-header" class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-4 shadow-lg flex-shrink-0 relative z-20">
  <div class="max-w-lg mx-auto">
    <h1 class="text-xl font-bold tracking-tight">QOBT</h1>
    <p class="text-blue-100 text-xs mt-0.5">Quadro de Obreiros Belemita de Tapau√°</p>
  </div>
</header>

<main id="main-content" class="flex-1 overflow-auto scrollbar-hide">
<section id="public-view" class="h-full flex flex-col">
  <div class="px-4 py-3 bg-white border-b border-blue-100 sticky top-0 z-10">
    <div class="max-w-lg mx-auto">
      <input type="text" id="search-input"
        placeholder="Buscar obreiro..."
        class="w-full pl-3 pr-4 py-2.5 bg-blue-50 border border-blue-200 rounded-xl text-sm placeholder-blue-400 focus:bg-white">
    </div>
    <p id="member-count" class="text-xs text-blue-500 mt-2 text-center font-medium"></p>
  </div>

  <div id="members-list" class="flex-1 overflow-auto px-4 py-4">
    <div class="max-w-lg mx-auto space-y-3"></div>
  </div>

  <div id="empty-state" class="hidden flex-1 flex items-center justify-center px-4 text-center">
    <p class="text-sm text-gray-500">Nenhum obreiro cadastrado</p>
  </div>
</section>

<section id="profile-view" class="hidden h-full flex flex-col bg-white">
  <div id="profile-content" class="flex-1 overflow-auto max-w-lg mx-auto"></div>
</section>

<section id="login-view" class="hidden h-full flex items-center justify-center px-4">
  <div class="bg-white max-w-xs w-full p-6 rounded-2xl shadow-lg border border-blue-100">
    <h2 class="text-center text-lg font-semibold mb-4">√Årea Administrativa</h2>
    <input id="admin-password" type="password"
      placeholder="Senha"
      class="w-full px-4 py-3 bg-blue-50 border border-blue-200 rounded-xl text-center text-lg tracking-widest">
    <p id="login-error" class="hidden text-red-500 text-xs mt-2 text-center">Senha incorreta</p>
    <button id="login-btn" class="w-full btn-primary text-white py-3 rounded-xl font-semibold mt-3 bg-blue-600 hover:bg-blue-700">Entrar</button>
    <button id="back-from-login" class="w-full text-blue-600 py-2 text-sm mt-2">‚Üê Voltar</button>
  </div>
</section>

<section id="admin-view" class="hidden h-full flex flex-col">
  <div class="px-4 py-3 bg-blue-600 text-white">
    <div class="max-w-lg mx-auto flex items-center justify-between">
      <p class="font-semibold">Painel Administrativo</p>
      <button id="logout-btn" class="text-blue-200 hover:text-white text-sm">Sair</button>
    </div>
  </div>

  <div class="flex-1 overflow-auto px-4 py-4">
    <div class="max-w-lg mx-auto space-y-4">
      <button id="add-member-btn"
        class="w-full bg-blue-600 text-white py-3 rounded-xl font-semibold shadow-md">Cadastrar Novo Obreiro</button>
      <div id="admin-members-list" class="space-y-3"></div>
      <p id="admin-empty-state" class="hidden text-center text-gray-500">Nenhum obreiro cadastrado</p>
    </div>
  </div>
</section>

<section id="form-view" class="hidden h-full flex flex-col bg-gray-50">
  <div class="px-4 py-3 bg-white border-b border-gray-200 flex-shrink-0">
    <div class="max-w-lg mx-auto flex items-center justify-between">
      <button id="cancel-form-btn" class="text-blue-600 font-medium text-sm">Cancelar</button>
      <h2 id="form-title" class="font-semibold text-gray-800">Novo Obreiro</h2>
      <button id="save-form-btn" class="bg-blue-600 text-white px-4 py-1.5 rounded-lg text-sm font-medium">Salvar</button>
    </div>
  </div>

  <div class="flex-1 overflow-auto px-4 py-4">
    <div class="max-w-lg mx-auto space-y-4">

      <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
        <label class="block text-sm font-medium text-gray-700 mb-3">Foto do Obreiro</label>
        <div class="flex items-center gap-4">
          <div id="photo-preview"
               class="w-20 h-20 rounded-full bg-blue-100 border-2 border-blue-200 flex items-center justify-center overflow-hidden">
            <svg class="w-10 h-10 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
          </div>
          <div class="flex-1">
            <input type="file" id="photo-input" accept="image/*" class="hidden">
            <button id="upload-photo-btn"
                    class="w-full bg-blue-50 text-blue-600 py-2 px-4 rounded-lg text-sm font-medium border border-blue-200">
              Escolher Foto
            </button>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Nome Completo *</label>
          <input id="input-nome" type="text"
                 placeholder="Digite o nome completo"
                 class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm">
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Cargo *</label>
          <select id="input-cargo"
                  class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm">
            <option value="">Selecione o cargo</option>
            <option>Pastor</option><option>Evangelista</option><option>Presb√≠tero</option>
            <option>Di√°cono</option><option>Cooperador</option><option>Auxiliar</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-3">Estado Civil</label>
          <div class="flex gap-3">
            <label class="flex-1 cursor-pointer">
              <input type="radio" name="marital-status" id="radio-casado" value="casado" class="hidden peer">
              <div class="px-4 py-2.5 bg-gray-50 border-2 border-gray-200 rounded-lg text-center text-sm peer-checked:bg-blue-50 peer-checked:border-blue-500">
                Casado(a)
              </div>
            </label>
            <label class="flex-1 cursor-pointer">
              <input type="radio" name="marital-status" id="radio-solteiro" value="solteiro" class="hidden peer" checked>
              <div class="px-4 py-2.5 bg-gray-50 border-2 border-gray-200 rounded-lg text-center text-sm peer-checked:bg-blue-50 peer-checked:border-blue-500">
                Solteiro(a)
              </div>
            </label>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Setor</label>
          <input id="input-setor" type="text"
                 placeholder="Ex: Setor 1, Sede"
                 class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm">
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Campo</label>
          <input id="input-campo" type="text"
                 placeholder="Ex: Tapau√°, Comunidade"
                 class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm">
        </div>
      </div>

      <div id="spouse-section" class="hidden bg-blue-50 rounded-xl p-4 shadow-sm border border-blue-200 space-y-4">
        <h3 class="text-blue-900 font-semibold">Informa√ß√µes do C√¥njuge</h3>

        <div>
          <label class="block text-sm font-medium text-blue-900 mb-2">Foto do C√¥njuge</label>
          <div class="flex items-center gap-3">
            <div id="spouse-photo-preview"
                 class="w-16 h-16 rounded-full bg-blue-100 border-2 border-blue-300 flex items-center justify-center overflow-hidden">
              <svg class="w-8 h-8 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
              </svg>
            </div>

            <div class="flex-1">
              <input type="file" id="spouse-photo-input" accept="image/*" class="hidden">
              <button id="upload-spouse-photo-btn"
                      class="w-full bg-blue-100 text-blue-700 py-2 px-3 rounded-lg text-sm font-medium border border-blue-300">
                Escolher Foto
              </button>
            </div>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-blue-900 mb-1">Nome do C√¥njuge</label>
          <input id="input-conjuge" type="text"
                 placeholder="Nome completo"
                 class="w-full px-4 py-2.5 bg-white border border-blue-200 rounded-lg text-sm">
        </div>

        <div>
          <label class="block text-sm font-medium text-blue-900 mb-1">Cargo do C√¥njuge</label>
          <select id="input-cargo-conjuge"
                  class="w-full px-4 py-2.5 bg-white border border-blue-200 rounded-lg text-sm">
            <option value="">Selecione o cargo</option>
            <option>Mission√°ria</option><option>Diaconisa</option><option>Auxiliar</option>
          </select>
        </div>
      </div>

      <p id="form-error" class="hidden text-red-500 text-sm text-center font-medium"></p>
      <div id="form-loading" class="hidden text-center py-4 text-blue-600 font-medium">Salvando...</div>

    </div>
  </div>
</section>

<footer id="main-footer" class="bg-white border-t border-blue-100 px-4 py-3 flex-shrink-0 relative z-20">
  <div class="max-w-lg mx-auto">
    <p class="text-center text-xs text-gray-400 mb-2">Igreja Minist√©rio Bel√©m Tapau√°</p>
    <button id="admin-link"
            class="w-full text-blue-600 text-sm font-medium py-2 hover:text-blue-800">
      √Årea Administrativa
    </button>
  </div>
</footer>

<div id="delete-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
  <div class="bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl">
    <h3 class="text-lg font-bold text-gray-800 mb-2">Excluir Obreiro?</h3>
    <p id="delete-member-name" class="text-sm text-gray-500 mb-6"></p>
    <div class="flex gap-3">
      <button id="cancel-delete-btn"
              class="flex-1 py-2.5 border border-gray-300 rounded-xl font-medium">
        Cancelar
      </button>
      <button id="confirm-delete-btn"
              class="flex-1 py-2.5 bg-red-600 text-white rounded-xl font-medium">
        Excluir
      </button>
    </div>
  </div>
</div>

<div id="toast"
     class="hidden fixed bottom-20 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full text-sm font-medium shadow-lg z-50">
</div>

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

<script>
// ======================
// üî• FIREBASE CONFIG
// ======================
const firebaseConfig = {
  apiKey:"AIzaSyCTfWEzEhm1EwgV5rXHeyYobyCj5HODrGA",
  authDomain:"qobt-d795a.firebaseapp.com",
  projectId:"qobt-d795a",
  storageBucket:"qobt-d795a.appspot.com",
  messagingSenderId:"403676737812",
  appId:"1:403676737812:web:8074bf2c1df2b234129201"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ======================
// APP ESTADO
// ======================
let members = [];
let isAdmin = false;
let editingMember = null;
let photoBase64 = '';
let spousePhotoBase64 = '';
const ADMIN_PASSWORD = "IGREJA2026";

// ======================
// üìå SELETORES R√ÅPIDOS
// ======================
const $ = (id) => document.getElementById(id);

// ======================
// üìå VIEWS
// ======================
const views = ["public","login","admin","form","profile"];
function showView(v){
  views.forEach(s => $(`${s}-view`).classList.add("hidden"));
  $(`${v}-view`).classList.remove("hidden");
  // Esconde header se estiver no perfil ou formul√°rio para ganhar espa√ßo
  if(v === "form" || v === "profile") $("main-header").classList.add("hidden");
  else $("main-header").classList.remove("hidden");
}

// ======================
// üìå TOAST
// ======================
function toast(msg){
  const t = $("toast");
  t.textContent = msg;
  t.classList.remove("hidden");
  setTimeout(()=>t.classList.add("hidden"),2500);
}

// ======================
// üëÄ FIRESTORE LISTENER
// ======================
db.collection("obreiro")
  .orderBy("nome")
  .onSnapshot(snapshot => {
    members = snapshot.docs.map(doc => ({
      id: doc.id,
      ...doc.data()
    }));
    renderPublicList($("search-input").value);
    renderAdminList();
  });

// ======================
// üîç BUSCA
// ======================
$("search-input").addEventListener("input", e => renderPublicList(e.target.value));

// ======================
// üîë LOGIN
// ======================
$("admin-link").onclick = () => showView(isAdmin ? "admin" : "login");
$("login-btn").onclick = () => {
  $("login-error").classList.add("hidden");
  if($("admin-password").value === ADMIN_PASSWORD){
    isAdmin = true;
    $("admin-password").value = "";
    showView("admin");
    toast("Acesso Administrativo Liberado!");
  } else $("login-error").classList.remove("hidden");
};
$("back-from-login").onclick = () => showView("public");
$("logout-btn").onclick = () => { isAdmin=false; showView("public"); toast("Sess√£o encerrada!"); };

// ======================
// ‚ûï ADICIONAR / EDITAR
// ======================
$("add-member-btn").onclick = () => {
  clearForm();
  $("form-title").textContent = "Novo Obreiro";
  showView("form");
};

$("cancel-form-btn").onclick = () => showView("admin");

// Alternar C√¥njuge
document.getElementsByName("marital-status").forEach(radio => {
  radio.addEventListener("change", (e) => {
    if (e.target.value === "casado") $("spouse-section").classList.remove("hidden");
    else $("spouse-section").classList.add("hidden");
  });
});

// ======================
// üì∏ FOTO
// ======================
$("upload-photo-btn").onclick = () => $("photo-input").click();
$("photo-input").addEventListener("change", e => readImage(e, "obreiro"));

$("upload-spouse-photo-btn").onclick = () => $("spouse-photo-input").click();
$("spouse-photo-input").addEventListener("change", e => readImage(e, "conjuge"));

function readImage(e, type){
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    const img = new Image();
    img.onload = ()=>{
      const canvas = document.createElement("canvas");
      const max = 300; // Reduz tamanho para economizar espa√ßo Firestore
      let w = img.width, h = img.height;
      if(w>h && w>max) h*=max/w, w=max;
      else if(h>max) w*=max/h, h=max;
      canvas.width=w; canvas.height=h;
      canvas.getContext("2d").drawImage(img,0,0,w,h);
      if(type==="obreiro") photoBase64=canvas.toDataURL("image/jpeg",0.7);
      else spousePhotoBase64=canvas.toDataURL("image/jpeg",0.7);
      updatePreviews();
    };
    img.src = reader.result;
  };
  reader.readAsDataURL(file);
}

function updatePreviews(){
  $("photo-preview").innerHTML = photoBase64
    ? `<img src="${photoBase64}" class="w-full h-full object-cover rounded-full">`
    : `<svg class="w-10 h-10 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>`;
  $("spouse-photo-preview").innerHTML = spousePhotoBase64
    ? `<img src="${spousePhotoBase64}" class="w-full h-full object-cover rounded-full">`
    : `<svg class="w-8 h-8 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>`;
}

// ======================
// üíæ SALVAR
// ======================
$("save-form-btn").onclick = async () => {
  const nome = $("input-nome").value.trim();
  const cargo = $("input-cargo").value.trim();
  const casado = $("radio-casado").checked;

  if(!nome || !cargo){
    $("form-error").textContent="Nome e Cargo s√£o obrigat√≥rios";
    $("form-error").classList.remove("hidden");
    return;
  }

  $("form-error").classList.add("hidden");
  $("form-loading").classList.remove("hidden");

  const obj = {
    nome, cargo,
    setor:$("input-setor").value.trim(),
    campo:$("input-campo").value.trim(),
    casado,
    conjuge:casado?$("input-conjuge").value.trim():"",
    cargo_conjuge:casado?$("input-cargo-conjuge").value:"",
    foto:photoBase64,
    foto_conjuge:casado?spousePhotoBase64:'',
    updatedAt: new Date().toISOString()
  };

  try{
    if(editingMember){
      await db.collection("obreiro").doc(editingMember.id).update(obj);
      toast("Dados atualizados!");
    } else {
      obj.createdAt = new Date().toISOString();
      await db.collection("obreiro").add(obj);
      toast("Obreiro cadastrado!");
    }
    $("form-loading").classList.add("hidden");
    clearForm();
    showView("admin");
  }catch(e){
    toast("Erro ao salvar. Tente novamente.");
    $("form-loading").classList.add("hidden");
  }
};

// ======================
// üóë EXCLUS√ÉO
// ======================
let deleteId = null;
function confirmDelete(id){
  const m = members.find(m=>m.id===id);
  deleteId = id;
  $("delete-member-name").textContent = `Excluir o registro de ${m.nome}?`;
  $("delete-modal").classList.remove("hidden");
}

$("cancel-delete-btn").onclick = ()=> $("delete-modal").classList.add("hidden");
$("confirm-delete-btn").onclick = async ()=>{
  await db.collection("obreiro").doc(deleteId).delete();
  $("delete-modal").classList.add("hidden");
  toast("Obreiro removido!");
};

// ======================
// ‚úèÔ∏è EDITAR
// ======================
function editMember(id){
  editingMember = members.find(m=>m.id===id);
  if(!editingMember) return;
  
  $("form-title").textContent = "Editar Obreiro";
  photoBase64 = editingMember.foto || '';
  spousePhotoBase64 = editingMember.foto_conjuge || '';
  
  $("input-nome").value = editingMember.nome || '';
  $("input-cargo").value = editingMember.cargo || '';
  $("input-setor").value = editingMember.setor || '';
  $("input-campo").value = editingMember.campo || '';

  if(editingMember.casado){
    $("radio-casado").checked=true;
    $("spouse-section").classList.remove("hidden");
    $("input-conjuge").value = editingMember.conjuge || '';
    $("input-cargo-conjuge").value = editingMember.cargo_conjuge || '';
  } else {
    $("radio-solteiro").checked=true;
    $("spouse-section").classList.add("hidden");
  }
  
  updatePreviews();
  showView("form");
}

function clearForm(){
  editingMember=null;
  photoBase64=''; spousePhotoBase64='';
  ["input-nome","input-cargo","input-setor","input-campo","input-conjuge","input-cargo-conjuge"]
    .forEach(id=>$(id).value="");
  $("radio-solteiro").checked = true;
  $("spouse-section").classList.add("hidden");
  updatePreviews();
}

// ======================
// üé® RENDER LISTS
// ======================
function renderPublicList(q=""){
  const container = $("members-list").querySelector("div");
  const filtered = members.filter(m=>m.nome?.toLowerCase().includes(q.toLowerCase()));
  
  container.innerHTML = filtered.map(m=>`
    <div class="bg-white rounded-xl p-4 shadow-sm border border-blue-50 active:scale-[0.98] transition-transform cursor-pointer"
         onclick="showProfile('${m.id}')">
      <div class="flex items-center gap-3">
        ${m.foto ? `<img src="${m.foto}" class="w-12 h-12 rounded-full object-cover border-2 border-blue-100">` : 
                   `<div class="w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center text-blue-300">
                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                    </div>`}
        <div>
          <p class="font-bold text-gray-800 leading-tight">${m.nome}</p>
          <p class="text-xs font-semibold text-blue-600 uppercase tracking-wider">${m.cargo}</p>
        </div>
      </div>
    </div>`).join("");
    
  $("empty-state").classList.toggle("hidden", filtered.length>0);
  $("member-count").textContent = filtered.length + (filtered.length === 1 ? " obreiro encontrado" : " obreiros encontrados");
}

function renderAdminList(){
  $("admin-empty-state").classList.toggle("hidden", members.length>0);
  $("admin-members-list").innerHTML = members.map(m=>`
    <div class="bg-white rounded-xl p-4 shadow-sm border flex justify-between items-center">
      <div class="flex items-center gap-3">
        <div class="text-sm">
          <p class="font-bold text-gray-800">${m.nome}</p>
          <p class="text-blue-600 text-xs">${m.cargo}</p>
        </div>
      </div>
      <div class="flex gap-2">
        <button onclick="editMember('${m.id}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg">
           <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/></svg>
        </button>
        <button onclick="confirmDelete('${m.id}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg">
           <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
        </button>
      </div>
    </div>`).join("");
}

// ======================
// üë§ PERFIL
// ======================
function showProfile(id){
  const m = members.find(x=>x.id===id);
  if(!m) return;

  $("profile-content").innerHTML = `
    <div class="bg-blue-600 text-white p-4 flex items-center gap-4">
       <button onclick="showView('public')" class="p-1"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15 19l-7-7 7-7"/></svg></button>
       <span class="font-semibold">Ficha do Obreiro</span>
    </div>
    
    <div class="p-6 text-center border-b border-gray-100">
      ${m.foto ? `<img src="${m.foto}" class="w-32 h-32 rounded-full mx-auto border-4 border-white shadow-xl object-cover">` :
                 `<div class="w-32 h-32 bg-blue-100 mx-auto rounded-full flex items-center justify-center text-blue-400">
                    <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                  </div>`}
      <h2 class="text-2xl font-bold text-gray-800 mt-4 leading-tight">${m.nome}</h2>
      <div class="inline-block bg-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase mt-2 tracking-widest">${m.cargo}</div>
    </div>

    <div class="p-6 space-y-6">
      <div class="grid grid-cols-2 gap-4">
        <div class="bg-gray-50 p-3 rounded-xl border border-gray-100">
          <p class="text-[10px] text-gray-400 uppercase font-bold mb-1">Setor</p>
          <p class="text-sm font-semibold text-gray-700">${m.setor || '---'}</p>
        </div>
        <div class="bg-gray-50 p-3 rounded-xl border border-gray-100">
          <p class="text-[10px] text-gray-400 uppercase font-bold mb-1">Campo</p>
          <p class="text-sm font-semibold text-gray-700">${m.campo || '---'}</p>
        </div>
      </div>

      ${m.casado ? `
        <div class="bg-blue-50 p-4 rounded-2xl border border-blue-100">
          <h3 class="text-blue-800 font-bold text-xs uppercase mb-3 flex items-center gap-2">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"/></svg>
            C√¥njuge
          </h3>
          <div class="flex items-center gap-4">
            ${m.foto_conjuge ? `<img src="${m.foto_conjuge}" class="w-14 h-14 rounded-full object-cover border-2 border-white shadow-sm">` : 
                               `<div class="w-14 h-14 rounded-full bg-blue-100 flex items-center justify-center text-blue-400">
                                  <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                                </div>`}
            <div>
              <p class="font-bold text-gray-800">${m.conjuge || "Nome n√£o informado"}</p>
              <p class="text-xs text-blue-700 font-medium">${m.cargo_conjuge || "Auxiliar"}</p>
            </div>
          </div>
        </div>
      ` : ''}
    </div>
  `;
  showView("profile");
}

// Escopo Global para eventos HTML
window.showView = showView;
window.editMember = editMember;
window.confirmDelete = confirmDelete;
window.showProfile = showProfile;
</script>
</body>
</html>
